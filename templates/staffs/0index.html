<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sortable and Filterable Table</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <style>
        .column-toggle {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="column-toggle">
        <label><input type="checkbox" class="toggle-vis" data-column="0" checked> Roll Number</label>
        <label><input type="checkbox" class="toggle-vis" data-column="1" checked> First Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="2" checked> Email</label>
        <label><input type="checkbox" class="toggle-vis" data-column="3" checked> Aadhaar Number</label>
        <label><input type="checkbox" class="toggle-vis" data-column="4" checked> Account Number</label>
        <label><input type="checkbox" class="toggle-vis" data-column="5"> Admission Mode</label>
        <label><input type="checkbox" class="toggle-vis" data-column="6"> Annual Income</label>
        <label><input type="checkbox" class="toggle-vis" data-column="7"> Bank Account Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="8"> Bank Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="9"> Batch</label>
        <label><input type="checkbox" class="toggle-vis" data-column="10"> Branch</label>
        <label><input type="checkbox" class="toggle-vis" data-column="11"> City</label>
        <label><input type="checkbox" class="toggle-vis" data-column="12"> Communication Address</label>
        <label><input type="checkbox" class="toggle-vis" data-column="13"> Communication City</label>
        <label><input type="checkbox" class="toggle-vis" data-column="14"> Communication Postal Code</label>
        <label><input type="checkbox" class="toggle-vis" data-column="15"> Communication State</label>
        <label><input type="checkbox" class="toggle-vis" data-column="16"> Community</label>
        <label><input type="checkbox" class="toggle-vis" data-column="17"> Country Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="18"> Course Type</label>
        <label><input type="checkbox" class="toggle-vis" data-column="19"> Date of Admission</label>
        <label><input type="checkbox" class="toggle-vis" data-column="20"> Degree</label>
        <label><input type="checkbox" class="toggle-vis" data-column="21"> Department</label>
        <label><input type="checkbox" class="toggle-vis" data-column="22"> Differently Abled</label>
        <label><input type="checkbox" class="toggle-vis" data-column="23"> Disability Percentage</label>
        <label><input type="checkbox" class="toggle-vis" data-column="24"> Disability Type</label>
        <label><input type="checkbox" class="toggle-vis" data-column="25"> Date of Birth</label>
        <label><input type="checkbox" class="toggle-vis" data-column="26"> EMIS Number</label>
        <label><input type="checkbox" class="toggle-vis" data-column="27"> Father Mobile</label>
        <label><input type="checkbox" class="toggle-vis" data-column="28"> Father Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="29"> Father Occupation</label>
        <label><input type="checkbox" class="toggle-vis" data-column="30"> First Graduate</label>
        <label><input type="checkbox" class="toggle-vis" data-column="31"> Gender</label>
        <label><input type="checkbox" class="toggle-vis" data-column="32"> Guardian Mobile</label>
        <label><input type="checkbox" class="toggle-vis" data-column="33"> Guardian Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="34"> Health Issues</label>
        <label><input type="checkbox" class="toggle-vis" data-column="35"> Health Issues Details</label>
        <label><input type="checkbox" class="toggle-vis" data-column="36"> Hostel Type</label>
        <label><input type="checkbox" class="toggle-vis" data-column="37"> Hosteller</label>
        <label><input type="checkbox" class="toggle-vis" data-column="38"> IFSC Code</label>
        <label><input type="checkbox" class="toggle-vis" data-column="39"> Last Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="40"> Lateral Entry</label>
        <label><input type="checkbox" class="toggle-vis" data-column="41"> Mobile Number</label>
        <label><input type="checkbox" class="toggle-vis" data-column="42"> Mother Mobile</label>
        <label><input type="checkbox" class="toggle-vis" data-column="43"> Mother Name</label>
        <label><input type="checkbox" class="toggle-vis" data-column="44"> Mother Occupation</label>
        <label><input type="checkbox" class="toggle-vis" data-column="45"> Nationality</label>
        <label><input type="checkbox" class="toggle-vis" data-column="46"> Orphan</label>
        <label><input type="checkbox" class="toggle-vis" data-column="47"> PAN Number</label>
        <label><input type="checkbox" class="toggle-vis" data-column="48"> Permanent Address</label>
        <label><input type="checkbox" class="toggle-vis" data-column="49"> Personal Email</label>
        <label><input type="checkbox" class="toggle-vis" data-column="50"> PG Address</label>
        <label><input type="checkbox" class="toggle-vis" data-column="51"> Postal Code</label>
        <label><input type="checkbox" class="toggle-vis" data-column="52"> Quota</label>
        <label><input type="checkbox" class="toggle-vis" data-column="53"> Religion</label>
        <label><input type="checkbox" class="toggle-vis" data-column="54"> Section</label>
        <label><input type="checkbox" class="toggle-vis" data-column="55"> State</label>
        <label><input type="checkbox" class="toggle-vis" data-column="56"> Status</label>
        <label><input type="checkbox" class="toggle-vis" data-column="57"> Sub Caste</label>
        <label><input type="checkbox" class="toggle-vis" data-column="58"> TNEA Application Number</label>
        <label><input type="checkbox" class="toggle-vis" data-column="59"> UDID</label>
        <label><input type="checkbox" class="toggle-vis" data-column="60"> Voter ID</label>
        <label><input type="checkbox" class="toggle-vis" data-column="61"> Year</label>
    </div>
    

    <table id="studentTable" class="display">
        <thead>
            <tr>
                <th>Roll Number</th>
                <th>First Name</th>
                <th>Email</th>
                <th>Aadhaar Number</th>
                <th>Account Number</th>
                <th>Admission Mode</th>
                <th>Annual Income</th>
                <th>Bank Account Name</th>
                <th>Bank Name</th>
                <th>Batch</th>
                <th>Branch</th>
                <th>City</th>
                <th>Communication Address</th>
                <th>Communication City</th>
                <th>Communication Postal Code</th>
                <th>Communication State</th>
                <th>Community</th>
                <th>Country Name</th>
                <th>Course Type</th>
                <th>Date of Admission</th>
                <th>Degree</th>
                <th>Department</th>
                <th>Differently Abled</th>
                <th>Disability Percentage</th>
                <th>Disability Type</th>
                <th>Date of Birth</th>
                <th>EMIS Number</th>
                <th>Father Mobile</th>
                <th>Father Name</th>
                <th>Father Occupation</th>
                <th>First Graduate</th>
                <th>Gender</th>
                <th>Guardian Mobile</th>
                <th>Guardian Name</th>
                <th>Health Issues</th>
                <th>Health Issues Details</th>
                <th>Hostel Type</th>
                <th>Hosteller</th>
                <th>IFSC Code</th>
                <th>Last Name</th>
                <th>Lateral Entry</th>
                <th>Mobile Number</th>
                <th>Mother Mobile</th>
                <th>Mother Name</th>
                <th>Mother Occupation</th>
                <th>Nationality</th>
                <th>Orphan</th>
                <th>PAN Number</th>
                <th>Permanent Address</th>
                <th>Personal Email</th>
                <th>PG Address</th>
                <th>Postal Code</th>
                <th>Quota</th>
                <th>Religion</th>
                <th>Section</th>
                <th>State</th>
                <th>Status</th>
                <th>Sub Caste</th>
                <th>TNEA Application Number</th>
                <th>UDID</th>
                <th>Voter ID</th>
                <th>Year</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
                <tr>
                    <td>{{ student['RollNumber'] }}</td>
                    <td>{{ student['first_name'] }}</td>
                    <td>{{ student['Email'] }}</td>
                    <td>{{ student['aadhaar_number'] }}</td>
                    <td>{{ student['account_number'] }}</td>
                    <td>{{ student['admission_mode'] }}</td>
                    <td>{{ student['annual_income'] }}</td>
                    <td>{{ student['bank_account_name'] }}</td>
                    <td>{{ student['bank_name'] }}</td>
                    <td>{{ student['batch'] }}</td>
                    <td>{{ student['branch'] }}</td>
                    <td>{{ student['city'] }}</td>
                    <td>{{ student['communication_address'] }}</td>
                    <td>{{ student['communication_city'] }}</td>
                    <td>{{ student['communication_postal_code'] }}</td>
                    <td>{{ student['communication_state'] }}</td>
                    <td>{{ student['community'] }}</td>
                    <td>{{ student['country_name'] }}</td>
                    <td>{{ student['course_type'] }}</td>
                    <td>{{ student['date_of_admission'] }}</td>
                    <td>{{ student['degree'] }}</td>
                    <td>{{ student['department'] }}</td>
                    <td>{{ student['differently_abled'] }}</td>
                    <td>{{ student['disability_percentage'] }}</td>
                    <td>{{ student['disability_type'] }}</td>
                    <td>{{ student['dob'] }}</td>
                    <td>{{ student['emis_number'] }}</td>
                    <td>{{ student['father_mobile'] }}</td>
                    <td>{{ student['father_name'] }}</td>
                    <td>{{ student['father_occupation'] }}</td>
                    <td>{{ student['first_graduate'] }}</td>
                    <td>{{ student['gender'] }}</td>
                    <td>{{ student['guardian_mobile'] }}</td>
                    <td>{{ student['guardian_name'] }}</td>
                    <td>{{ student['health_issues'] }}</td>
                    <td>{{ student['health_issues_details'] }}</td>
                    <td>{{ student['hostel_type'] }}</td>
                    <td>{{ student['hosteller'] }}</td>
                    <td>{{ student['ifsc_code'] }}</td>
                    <td>{{ student['last_name'] }}</td>
                    <td>{{ student['lateral_entry'] }}</td>
                    <td>{{ student['mobile_number'] }}</td>
                    <td>{{ student['mother_mobile'] }}</td>
                    <td>{{ student['mother_name'] }}</td>
                    <td>{{ student['mother_occupation'] }}</td>
                    <td>{{ student['nationality'] }}</td>
                    <td>{{ student['orphan'] }}</td>
                    <td>{{ student['pan_number'] }}</td>
                    <td>{{ student['permanent_address'] }}</td>
                    <td>{{ student['personal_email'] }}</td>
                    <td>{{ student['pg_address'] }}</td>
                    <td>{{ student['postal_code'] }}</td>
                    <td>{{ student['quota'] }}</td>
                    <td>{{ student['religion'] }}</td>
                    <td>{{ student['section'] }}</td>
                    <td>{{ student['state'] }}</td>
                    <td>{{ student['status'] }}</td>
                    <td>{{ student['sub_caste'] }}</td>
                    <td>{{ student['tnea_application_number'] }}</td>
                    <td>{{ student['udid'] }}</td>
                    <td>{{ student['voter_id'] }}</td>
                    <td>{{ student['year'] }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
    <script>
        $(document).ready(function() {
            var table = $('#studentTable').DataTable({
                "paging": true,
                "searching": true,
                "ordering": true,
                "order": [[0, 'asc']],
                "pageLength": 100,
                "columnDefs": [
                    { "visible": true, "targets": [0, 1, 2, 3, 4] },
                    { "visible": false, "targets": '_all' }
                ]
            });

            $('input.toggle-vis').on('change', function(e) {
                var column = table.column($(this).attr('data-column'));
                column.visible(!column.visible());
            });
        });
    </script>
</body>
</html>
